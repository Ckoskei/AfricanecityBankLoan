{% load static %}
<!DOCTYPE html>
<html>
<head>
	<title>Loan Features</title>
<style>
  /* table styles */
  #my-table {
    border-collapse: collapse;
    margin: auto;
    font-family: Arial, sans-serif;
    font-size: 14px;
    width: 100%;
    background-image: url('\static\images\home_slider.jpg');
    background-repeat: no-repeat;
    background-size: cover;
  }

  #my-table th,
  #my-table td {
    padding: 10px;
    border: 1px solid #ddd;
  }

  #my-table th {
    background-color: #ccc;
    font-weight: bold;
    text-align: center;
  }

  /* image styles */
  #my-table img {
    max-height: 50px;
  }

  /* center text in payment cells */
  #my-table td.payment {
    text-align: center;
  }
</style>
<body>
<table id="my-table">
  <tr>
    <th rowspan="5">
      {% for bank in banks %}
      <img src="{{bank.image.url}}"/>
      {% endfor %}
    </th>
    <th>Monthly Instalments</th>
    <th>Number of Payments</th>
    <th>Interest Rate</th>
    <th>Qualified Amount</th>
  </tr>
  <tr>
    <td class="payment" id="pmt-1"></td>
    <td>60</td>
    <td>0.00858</td>
    <td>$10,000.00</td>
  </tr>
  <tr>
    <td class="payment" id="pmt-2"></td>
    <td>48</td>
    <td>0.00858</td>
    <td>$10,000.00</td>
  </tr>
  <tr>
    <td class="payment" id="pmt-3"></td>
    <td>36</td>
    <td>0.00858</td>
    <td>$10,000.00</td>
  </tr>
  <tr>
    <td class="payment" id="pmt-4"></td>
    <td>24</td>
    <td>0.00858</td>
    <td>$10,000.00</td>
  </tr>
 
</table>
  <a href='/Banks/Applicant/'><button>Apply</button></a>

<script>
  function calculatePmt(n, r, pv) {
    var rPerMonth = r / 12;
    var pmt = pv * rPerMonth / (1 - Math.pow(1 + rPerMonth, -n));
    return pmt.toFixed(2);
  }

  var table = document.getElementById("my-table");

  for (var i = 1; i < table.rows.length; i++) {
    var row = table.rows[i];
    var n = parseFloat(row.cells[1].textContent);
    var r = parseFloat(row.cells[2].textContent);
    var pv = parseFloat(row.cells[3].textContent.replace(/[^0-9.-]+/g, ""));
    var pmt = calculatePmt(n, r, pv);
    row.cells[0].innerHTML = "$" + pmt;
    row.cells[0].classList.add("payment");
  }
</script>
</body>
</html>
